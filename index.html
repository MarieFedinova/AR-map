<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="map-holder"><img class="map" src="map.svg" /></div>

    <div class="holder">
      <div class="guide">
        <div class="robot">
          <img src="guide-blue.svg" />
        </div>
        <div>
          <p class="mystery-guide blue-guide">Tajemný průvodce</p>
          <div id="guide-text" class="guide-bubble blue-bubble">
            Tady vidíte, kudy jít. Další otázku najdete <b>vedle Zary</b>. Nebo
            se koukněte na fotografie, podle kterých se můžete po cestě
            orientovat.
          </div>
        </div>
      </div>
      <div class="toggle-buttons">
        <input
          id="toggle-on"
          class="toggle toggle-left"
          name="toggle"
          value="false"
          type="radio"
          checked
        />
        <label for="toggle-on" class="btn">Mapa</label>
        <input
          id="toggle-off"
          class="toggle toggle-right"
          name="toggle"
          value="true"
          type="radio"
        />
        <label for="toggle-off" class="btn">Fotografie</label>
      </div>
    </div>

    <script>
      let vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty("--vh", `${vh}px`);

      var wrapper;
      var imageWrapper;
      var animatedModel;
      var guideText;
      var overlay;

      window.onload = () => {
        wrapper = document.getElementById("wrapper");
        imageWrapper = document.getElementById("imageWrapper");
        animatedModel = document.getElementById("animatedModel");
        guideText = document.getElementById("guide-text");
        overlay = document.getElementById("overlay");
      };

      AFRAME.registerComponent("registerevents", {
        init: function () {
          var marker = this.el;

          marker.addEventListener("markerFound", function () {
            var markerId = marker.id;
            overlay.style.visibility = "hidden";
            console.log("markerFound", markerId);
            // TODO: Add your own code here to react to the marker being found.
          });

          marker.addEventListener("markerLost", function () {
            var markerId = marker.id;
            overlay.style.visibility = "visible";
            console.log("markerLost", markerId);
            // TODO: Add your own code here to react to the marker being lost.
          });
        },
      });

      function wrongAnswer() {
        guideText.innerHTML = "Špatně! Zkuste to znovu.";
      }

      function rightAnswer() {
        guideText.innerHTML =
          "Správně! Telefon Xxx Yyy od společnosti ABC se začal používat v USA v listopadu 1989.";
        animatedModel.setAttribute("animation-mixer", {
          clip: "*",
          loop: "once",
        });
      }

      function showUsb() {
        var usbEntity = document.createElement("a-entity");
        usbEntity.setAttribute("gltf-model", "#usb");
        usbEntity.setAttribute("rotation", { x: -90, y: 0, z: 0 });
        usbEntity.setAttribute("scale", { x: 1, y: 1, z: 1 });
        usbEntity.setAttribute("animation-mixer", "clips: *");

        imageWrapper.innerHTML = "";
        wrapper.innerHTML = "";
        wrapper.appendChild(usbEntity);
      }

      function showArrow() {
        var arrowEntity = document.createElement("a-entity");
        arrowEntity.setAttribute("gltf-model", "#arrow");
        arrowEntity.setAttribute("rotation", { x: 0, y: -135, z: 0 });
        arrowEntity.setAttribute("position", { x: 0.5, y: 0, z: -1 });
        arrowEntity.setAttribute("scale", { x: 0.25, y: 0.25, z: 0.25 });

        imageWrapper.innerHTML = "";
        wrapper.innerHTML = "";
        wrapper.appendChild(arrowEntity);
      }

      function showMap() {
        var a = document.createElement("a");
        a.href =
          "https://raw.githubusercontent.com/arexamples/ar/master/images/map.png";
        a.target = "_blank";
        a.ret = "noopener noreferrer";

        var img = document.createElement("img");
        img.src =
          "https://raw.githubusercontent.com/arexamples/ar/master/images/map.png";
        img.style =
          "text-align:center;max-width: 100%; height: auto; position: absolute; bottom: 0;left: 0; z-index: 10;";

        wrapper.innerHTML = "";
        imageWrapper.innerHTML = "";
        a.appendChild(img);
        imageWrapper.appendChild(a);
      }

      function showMap2() {
        var a = document.createElement("a");
        a.href =
          "https://raw.githubusercontent.com/arexamples/ar/master/images/map2.png";
        a.target = "_blank";
        a.ret = "noopener noreferrer";

        var img = document.createElement("img");
        img.src =
          "https://raw.githubusercontent.com/arexamples/ar/master/images/map2.png";
        img.style =
          "text-align:center;max-width: 100%; height: auto; position: absolute; bottom: 0;left: 0; z-index: 10;";

        wrapper.innerHTML = "";
        imageWrapper.innerHTML = "";
        a.appendChild(img);
        imageWrapper.appendChild(a);
      }
    </script>
  </body>
</html>
